<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="description" content="Place to share my thoughts and experiences in the tech world.">
    <meta name="keywords" content="Artificial Intelligence, Software Development, Algorithm Analysis, My Understandings">
    <meta name="theme-color" content="#000000">

    <!-- Open Graph -->
    <meta property="og:title"
        content="Binary Search - Shreyas' Blog">
    
    <meta property="og:type" content="article">
    <meta property="og:description" content="
  Beginners:

  
    TopCoder Binary Search Article
  

">
    
    <meta property="article:published_time" content=" 2025-07-25T00:00:00Z">
    
    
    <meta property="article:author" content="Shreyas S N">
    
    
    <meta property="article:tag" content="C++">
    
    <meta property="article:tag" content="Algorithms">
    
    <meta property="article:tag" content="Level-1">
    
    
    <meta property="og:image" content="http://localhost:4000https://github.com/shreyassn.png">
    <meta property="og:url" content="http://localhost:4000/2025/07/25/binary-search/">
    <meta property="og:site_name" content="Shreyas' Blog">

    <title>Binary Search - Shreyas' Blog</title>

    <!-- Web App Manifest -->
    <link rel="manifest" href="/pwa/manifest.json">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/img/favicon.ico">

    <!-- Canonical URL -->
    <link rel="canonical" href="http://localhost:4000/2025/07/25/binary-search/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/hux-blog.min.css">
    <link rel="stylesheet" href="/css/blogs.css">
    <link rel="stylesheet" href="/css/blogs-dark-mode.css">

    <!-- Custom Fonts -->
    <!-- <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
    <!-- <link href="https://fonts.googleapis.com/css2?family=Cormorant:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet"> -->
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400..800;1,400..800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montaga&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Quintessential&display=swap" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>

    <!-- Google AdSense -->
    <script data-ad-client="ca-pub-6487568398225121" async
        src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="" class="blog-full-content">

    <!-- Navigation -->

    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">
                    <img src="/img/blog-logo.svg" alt="logo" class="brand-logo" width="40" height="40">
                    Shreyas' Blogs
                </a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div id="huxblog_navbar">
                <div class="navbar-collapse">
                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="/">Home</a>
                        </li>
                        
                        
                        
                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                        
                        
                        <li>
                            <a href="/archive/">Archive</a>
                        </li>
                        
                        
                        
                        <li>
                            <a href="/arts/">Arts</a>
                        </li>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <li class="theme-icon">
                            <a href="javascript:void(0)" role="button" aria-label="Toggle dark theme" aria-pressed="false" title="Toggle theme" tabindex="0">
                                <i class="fa fa-moon-o" aria-hidden="true"></i>
                            </a>
                        </li>

                        <li class="search-icon">
                            <a href="javascript:void(0)">
                                <i class="fa fa-search"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <script>
        // Drop Bootstarp low-performance Navbar
        // Use customize navbar with high-quality material design animation
        // in high-perf jank-free CSS3 implementation
        var $body = document.body;
        var $toggle = document.querySelector('.navbar-toggle');
        var $navbar = document.querySelector('#huxblog_navbar');
        var $collapse = document.querySelector('.navbar-collapse');

        var __HuxNav__ = {
            close: function () {
                $navbar.className = " ";
                // wait until animation end.
                setTimeout(function () {
                    // prevent frequently toggle
                    if ($navbar.className.indexOf('in') < 0) {
                        $collapse.style.height = "0px"
                    }
                }, 400)
            },
            open: function () {
                $collapse.style.height = "auto"
                $navbar.className += " in";
            }
        }

        // Bind Event
        $toggle.addEventListener('click', function (e) {
            if ($navbar.className.indexOf('in') > 0) {
                __HuxNav__.close()
            } else {
                __HuxNav__.open()
            }
        })

        /**
         * Since Fastclick is used to delegate 'touchstart' globally
         * to hack 300ms delay in iOS by performing a fake 'click',
         * Using 'e.stopPropagation' to stop 'touchstart' event from 
         * $toggle/$collapse will break global delegation.
         * 
         * Instead, we use a 'e.target' filter to prevent handler
         * added to document close HuxNav.  
         *
         * Also, we use 'click' instead of 'touchstart' as compromise
         */
        document.addEventListener('click', function (e) {
            if (e.target == $toggle) return;
            if (e.target.className == 'icon-bar') return;
            __HuxNav__.close();
        })
    </script>
    <!-- Search -->
<div class="search-page">
  <div class="search-icon-close-container">
    <span class="search-icon-close">
      <i class="fa fa-chevron-down"></i>
    </span>
  </div>
  <div class="search-main container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <form></form>
        <input type="text" id="search-input" placeholder="$ grep...">
        </form>
        <div id="search-results" class="mini-post-list"></div>
      </div>
    </div>
  </div>
</div>

    <!-- Image to hack wechat -->
<!-- <img src="/img/icon_wechat.png" width="0" height="0"> -->
<!-- <img src="/img/post/bg-poster/43.png" width="0" height="0"> -->

<!-- Post Header -->



<style type="text/css">
  header.intro-header {
    position: relative;
    background-image: url('/img/post/bg-poster/43.png');
    
  }

  
  header.intro-header .header-mask {
    width: 100%;
    height: 100%;
    position: absolute;
    background: rgba(0, 0, 0, 0.5);
  }
  
</style>




  <header class="intro-header">
    
    <div class="header-mask"></div>
    
    <div class="container-fluid">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
          <div class="post-heading">
            <div class="tags">
              
              <a class="tag" href="/archive/?tag=C%2B%2B" title="C++">C++</a>
              
              <a class="tag" href="/archive/?tag=Algorithms" title="Algorithms">Algorithms</a>
              
              <a class="tag" href="/archive/?tag=Level-1" title="Level-1">Level-1</a>
              
            </div>
            <h1>Binary Search</h1>
            
            <h2 class="subheading">All patterns of binary search</h2>
            <span class="meta">Posted by Shreyas S N on
              July 25, 2025</span>
          </div>
        </div>
      </div>
    </div>
  </header>
  

  

  

<!-- Post Content -->
<article>
  <div class="container-fluid">
    <div class="row">

      <!-- Post Container -->
      <div class="
                col-lg-9 col-lg-offset-1
                col-md-10 col-md-offset-0
                post-container">

        <!-- Multi-Lingual -->
        

        <blockquote>
  <p>Beginners:</p>

  <ul>
    <li><a href="https://www.topcoder.com/community/competitive-programming/tutorials/binary-search">TopCoder Binary Search Article</a></li>
  </ul>
</blockquote>

<h3 id="why-do-we-need-binary-search">Why do we need $binary search$</h3>

<p>So simple yet so powerful algorithm, and this is one of the algorithm which i admire the most because of its verstility and applications. If in any scenario you realise after some <code class="language-plaintext highlighter-rouge">true</code> sequecence everything is gonna be <code class="language-plaintext highlighter-rouge">false</code> or vice-versa, then you can blindly apply binary search. To make it clear let me tell this way, Lets hope a solution space which has clear boundary between <code class="language-plaintext highlighter-rouge">FALSE</code> &amp; <code class="language-plaintext highlighter-rouge">TRUE</code> -&gt; array: <code class="language-plaintext highlighter-rouge">[FALSE, FALSE, FALSE, TRUE, TRUE, TRUE]</code> in this all you have to do is to find where that bounday lies that seperates <code class="language-plaintext highlighter-rouge">FALSE</code> and <code class="language-plaintext highlighter-rouge">TRUE</code> sequence. Too much, too less explaination -&gt;  sorted array: $[1,2,3,4,5]$ and $target=3$, Question: find index where target present in sorted array; first lets define
boundary line condition: left of 3 (<code class="language-plaintext highlighter-rouge">arr[i] &lt; 3</code>) and right of 3 (<code class="language-plaintext highlighter-rouge">arr[i] &gt; 3</code>), so find boundary(<code class="language-plaintext highlighter-rouge">arr[i] == 3</code>) that leads to finding index in which $target=3$ is present in array but here you need to take care of whether the input is <code class="language-plaintext highlighter-rouge">sorted</code> are not because it only applies to sorted array as we seen, to define boundary condition. Lets keep this small, I will explain later.</p>

<p>Searching an element in an unsorted array takes $O(N)$ time complexity, where <code class="language-plaintext highlighter-rouge">N</code> is number of elements in input array. But if the input array in in sorted order then we can reduce to $O(log_2N)$ by appling binary search. This is huge optimization as you know that when you go from <code class="language-plaintext highlighter-rouge">N</code> → <code class="language-plaintext highlighter-rouge">2N</code>, the $log_2$ increments just by 1.</p>

<p>It’s worth to take note on advantage of first sorting an input array which takes $O(Nlog_2N)$ in case of searcing a target inside <code class="language-plaintext highlighter-rouge">for i in range(M)</code>, so summing up all. the time complexity will be $O(Nlog_2N) + O(Mlog_2N)$ ie, sorting + (for loop upto M + binary search inside loop). Through this approach we can apply on broader problems which will be discussed on below sections.</p>

<h3 id="lets-understand-bit-more-clear-on-working-principle">Let’s understand bit more clear on working principle</h3>

<p>Searching for an element in a given array has always been an interesting task, but when it comes to retrieving it with the most optimal time and space complexity, we often fall into the trap of looping approaches. Binary Search, however, is a method that comes in handy, as it strikes a balance between both time and auxiliary complexities. It works in $O(log n)$ time and uses $O(1)$ space. Additionally, we can even implement a <a href="https://probablydance.com/2023/04/27/beautiful-branchless-binary-search/">branchless binary search</a> for low-level hardware usage to optimize CPU operations.</p>

<p>For any given <code class="language-plaintext highlighter-rouge">sorted array</code>, we can apply binary search to retrieve the index of a target element.</p>

<p>A famous analogy is looking up the page number of a word in a dictionary. How do you usually check the meaning of a word there? Personally, I open the dictionary in the middle, look at the first word on that page, and compare its initial letter with the word I’m searching for. Depending on whether it comes before or after, I then keep narrowing down the range until I get to the exact word. Isn’t it surprising how much time it saves compared to checking every page sequentially?</p>

<p>Similarly, in binary search, we first calculate the middle of a range \([l, r]\). Usually its calculated as $mid = (l + r) / 2$
but when \(l\) or \(r\) are very large, adding them directly (\(l + r\)) can cause integer overflow. To avoid that, you can use this trick $mid = l + (r - l)/2$</p>

\[\text{bsearch}(arr, k) =
\begin{cases}
   \text{return mid} &amp; \text{if } arr[\text{mid}] = k \\
   \text{right} \gets \text{mid} - 1 &amp; \text{if k is present left of arr[mid]} \\
   \text{left} \gets \text{mid} + 1 &amp; \text{if k is present right of arr[mid]}
\end{cases}\]

<p>Lets visualize things
<img width="500" src="/img/in-post/post-binary-search/bs1.svg" />
<small class="img-hint">Binary Search</small></p>

<h3 id="find-exact-index-of-target-in-an-array">Find exact index of target in an array</h3>

<p>Get started with this <a href="https://leetcode.com/problems/binary-search/description/">problem</a></p>

<p>Getting exact index pattern of binary search could be applied wide range
and it is somewhat direct question. little difficulty could be seen in problem
when asked to retrieve <code class="language-plaintext highlighter-rouge">Kth optimal result of op(arr[i], arr[j])</code> where $1 \leq i, j \leq n $</p>

<p>here is a simple template for getting exact index of and k</p>

<p>take a closer look on $ l \leq r $. We use $\leq$ when we have to return answer within the loop.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">binarySearch</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">arr</span><span class="p">,</span> <span class="kt">int</span> <span class="n">k</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">arr</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
    <span class="kt">int</span> <span class="n">l</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">l</span> <span class="o">&lt;=</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">l</span> <span class="o">+</span> <span class="p">((</span><span class="n">r</span> <span class="o">-</span> <span class="n">l</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">m</span><span class="p">]</span> <span class="o">==</span> <span class="n">k</span><span class="p">)</span> <span class="k">return</span> <span class="n">m</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">m</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">k</span><span class="p">)</span> <span class="n">r</span> <span class="o">=</span> <span class="n">m</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">else</span> <span class="n">l</span> <span class="o">=</span> <span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="questionlist-1-get-exact-position-of-target">QuestionList-1: Get exact position of target</h3>

<h3 id="return-index-of-firstlast-occurrence">Return index of First/Last Occurrence</h3>

<p>Lets say a number is occuring more than 1 times. In this sitution we gotta return index of either of first or last occurance.</p>

<p>a small changes brings pointer to first/last occurance</p>

<table>
  <thead>
    <tr>
      <th>variant</th>
      <th>return</th>
      <th>changes to do in $if()$</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>First occurrence</td>
      <td>return $left$</td>
      <td>$if\ (arr[mid] \geq k)\ \ right = mid$</td>
    </tr>
    <tr>
      <td>Last occurrence</td>
      <td>return $left - 1$</td>
      <td>$if\ (arr[mid] &gt; k)\ \ right = mid$</td>
    </tr>
  </tbody>
</table>

<ul id="bs" class="tab" data-tab="99c54cd3-5058-4d9b-a6d7-46ac9b7d137e" data-name="bs">
  
      <li class="active" id="bs-first-occurrence">
          <a href="#">first occurrence </a>
      </li>
  
      <li id="bs-last-occurrence">
          <a href="#">last occurrence </a>
      </li>
  
</ul>
<ul class="tab-content" id="99c54cd3-5058-4d9b-a6d7-46ac9b7d137e" data-name="bs">
  
      <li class="active">
<p>make sure use of $\leq$ as this will help pointer to slide to very begining of target of multiple occurrence.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">firstOccurrence</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">l</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="n">arr</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">l</span> <span class="o">&lt;</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">l</span> <span class="o">+</span> <span class="p">(</span><span class="n">r</span> <span class="o">-</span> <span class="n">l</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">m</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">k</span><span class="p">)</span> <span class="n">r</span> <span class="o">=</span> <span class="n">m</span><span class="p">;</span>
        <span class="k">else</span> <span class="n">l</span> <span class="o">=</span> <span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// return (arr.size() &gt; l &amp;&amp; arr[l] == k) ? l : -1;</span>
    <span class="k">return</span> <span class="n">l</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

</li>
  
      <li>
<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">lastOccurrence</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">l</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="n">arr</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">l</span> <span class="o">&lt;</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">l</span> <span class="o">+</span> <span class="p">(</span><span class="n">r</span> <span class="o">-</span> <span class="n">l</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">m</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">k</span><span class="p">)</span> <span class="n">r</span> <span class="o">=</span> <span class="n">m</span><span class="p">;</span>
        <span class="k">else</span> <span class="n">l</span> <span class="o">=</span> <span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// return (l &gt; 0 &amp;&amp; arr[l-1] == k) ? l-1 : -1;</span>
    <span class="k">return</span> <span class="n">l</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

</li>
  
</ul>

<p><a href="https://leetcode.com/problems/find-first-and-last-position-of-element-in-sorted-array">Find First and Last Position of Element in Sorted Array</a></p>

<h3 id="t-t-f-f-sequence">[T, T, F, F] Sequence</h3>

<p>Till now we have seen of $\text{[False, False, True, True]}$ form of monotonic sequence. Now lets see of it reverse. Its important pattern where lot of hidden problems can be expected in such sequence and this is one of the tie breaker from beginner and intermediate.</p>

<p>It’s important to analyze the <strong>monotonic sequence of candidate solutions</strong> before implementing.</p>

<p>This pattern means: after some point, all values become <code class="language-plaintext highlighter-rouge">false</code>.
Seen in problems where we construct a candidate solution and check if the current score/target is below/above a midpoint.</p>

<p>This pattern frequently appears in medium-to-hard problems.</p>

<ul id="var" class="tab" data-tab="171c70d7-1af6-4498-82c0-d9e583858ba3" data-name="var">
  
      <li class="active" id="var-variations-1">
          <a href="#">variations_1 </a>
      </li>
  
      <li id="var-variations-2">
          <a href="#">variations_2 </a>
      </li>
  
</ul>
<ul class="tab-content" id="171c70d7-1af6-4498-82c0-d9e583858ba3" data-name="var">
  
      <li class="active">
<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">firstTrueSeq</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">l</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="n">n</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">l</span> <span class="o">&lt;</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">l</span> <span class="o">+</span> <span class="p">(</span><span class="n">r</span> <span class="o">-</span> <span class="n">l</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">condition</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="o">==</span> <span class="nb">true</span><span class="p">)</span> <span class="n">l</span> <span class="o">=</span> <span class="n">m</span><span class="p">;</span>
        <span class="k">else</span> <span class="n">r</span> <span class="o">=</span> <span class="n">m</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">l</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

</li>
  
      <li>
<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">firstTrueSeq</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">l</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="n">n</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">l</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">l</span> <span class="o">+</span> <span class="p">(</span><span class="n">r</span> <span class="o">-</span> <span class="n">l</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">condition</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="o">==</span> <span class="nb">true</span><span class="p">)</span> <span class="n">l</span> <span class="o">=</span> <span class="n">m</span><span class="p">;</span>   <span class="c1">// e.g., res &lt;= k</span>
        <span class="k">else</span> <span class="n">r</span> <span class="o">=</span> <span class="n">m</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">l</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

</li>
  
</ul>

<h3 id="c-stl-lower_bound-and-upper_bound">C++ STL <em>lower_bound()</em> and <em>upper_bound()</em></h3>

<p>C++ has this in-built functions which returns iterator to the element present in container. Both $\text{lower_bound()}$ and $\text{upper_bound()}$ available under header file <code class="language-plaintext highlighter-rouge">#include &lt;algorithm&gt;</code></p>

<p>lets say $f_i$ be <em>find first element</em> i will be using fi in below like fi &gt; target, which translates to find first element &gt; target</p>

<p>This functions were compiled from <a href="https://codeforces.com/blog/entry/113032">blog</a>.</p>
<ul id="stl" class="tab" data-tab="132383cd-ca1b-4ce1-8156-fabfac0380e8" data-name="stl">
  
      <li class="active" id="stl--f-i----target">
          <a href="#">$f_i$ &gt; Target </a>
      </li>
  
      <li id="stl--f-i----geq--target">
          <a href="#">$f_i$ $\geq$ Target </a>
      </li>
  
</ul>
<ul class="tab-content" id="132383cd-ca1b-4ce1-8156-fabfac0380e8" data-name="stl">
  
      <li class="active">
<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kt">int</span> <span class="nf">firstGreater</span><span class="p">(</span><span class="n">vector</span> <span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">upper_bound</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">a</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">target</span><span class="p">);</span>
      <span class="k">return</span> <span class="n">it</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="n">end</span><span class="p">()</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="n">it</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
  <span class="p">}</span>
</code></pre></div></div>

</li>
  
      <li>
<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kt">int</span> <span class="nf">firstGreaterEqual</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">lower_bound</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">a</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">target</span><span class="p">);</span>
      <span class="k">return</span> <span class="n">it</span> <span class="o">==</span> <span class="n">a</span><span class="p">.</span><span class="n">end</span><span class="p">()</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="n">it</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
  <span class="p">}</span>
</code></pre></div></div>

</li>
  
</ul>

<ul id="stl1" class="tab" data-tab="71424a6d-f44c-4c24-85d0-c8be1404b948" data-name="stl1">
  
      <li class="active" id="stl1--f-i----target">
          <a href="#">$f_i$ &lt; Target </a>
      </li>
  
      <li id="stl1--f-i----leq--target">
          <a href="#">$f_i$ $\leq$ Target </a>
      </li>
  
</ul>
<ul class="tab-content" id="71424a6d-f44c-4c24-85d0-c8be1404b948" data-name="stl1">
  
      <li class="active">
<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kt">int</span> <span class="nf">firstLess</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">a</span> <span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">lower_bound</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">arr</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">target</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">it</span> <span class="o">==</span> <span class="n">a</span><span class="p">.</span><span class="n">begin</span><span class="p">())</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
      <span class="k">return</span> <span class="p">(</span><span class="n">it</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">begin</span><span class="p">())</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre></div></div>

</li>
  
      <li>
<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kt">int</span> <span class="nf">firstLessEqual</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">a</span> <span class="p">,</span> <span class="kt">int</span> <span class="n">target</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">upper_bound</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">a</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="n">target</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">it</span> <span class="o">==</span> <span class="n">a</span><span class="p">.</span><span class="n">begin</span><span class="p">())</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
      <span class="k">return</span> <span class="p">(</span><span class="n">it</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">begin</span><span class="p">())</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre></div></div>

</li>
  
</ul>

<h3 id="minimax-problems">Minimax Problems</h3>

<p>Usually hard-level in LeetCode.
When a question is about <code class="language-plaintext highlighter-rouge">minimizing the maximum value</code>, it can often be solved using the minimax binary search pattern.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="nf">minimax_binarySearch</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">nums</span><span class="p">,</span> <span class="kt">int</span> <span class="n">k</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">l</span> <span class="o">=</span> <span class="o">*</span><span class="n">min_element</span><span class="p">(</span><span class="n">nums</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">nums</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
    <span class="kt">int</span> <span class="n">h</span> <span class="o">=</span> <span class="n">accumulate</span><span class="p">(</span><span class="n">nums</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">nums</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="mi">0ll</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">k</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="n">h</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">k</span> <span class="o">==</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">())</span> <span class="k">return</span> <span class="n">l</span><span class="p">;</span>

    <span class="k">auto</span> <span class="n">checkUpperGuess</span> <span class="o">=</span> <span class="p">[</span><span class="o">&amp;</span><span class="p">](</span><span class="kt">int</span> <span class="n">upperSum</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">res</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="kt">long</span> <span class="kt">long</span> <span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">num</span> <span class="o">:</span> <span class="n">nums</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">sum</span> <span class="o">+</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="n">upperSum</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">res</span><span class="o">++</span><span class="p">;</span>
                <span class="n">sum</span> <span class="o">=</span> <span class="n">num</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">res</span> <span class="o">&gt;</span> <span class="n">k</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">sum</span> <span class="o">+=</span> <span class="n">num</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="k">while</span> <span class="p">(</span><span class="n">l</span> <span class="o">&lt;</span> <span class="n">h</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">l</span> <span class="o">+</span> <span class="p">(</span><span class="n">h</span> <span class="o">-</span> <span class="n">l</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">checkUpperGuess</span><span class="p">(</span><span class="n">m</span><span class="p">))</span> <span class="n">h</span> <span class="o">=</span> <span class="n">m</span><span class="p">;</span>
        <span class="k">else</span> <span class="n">l</span> <span class="o">=</span> <span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">l</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="finding-the-k-th-element">Finding the K-th Element</h3>

<p>Fixed-start binary search on subarrays ending with a monotonic window.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ll</span> <span class="nf">binary_search</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">nums</span><span class="p">,</span> <span class="n">ll</span> <span class="n">k</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">nums</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
    <span class="n">ll</span> <span class="n">totalCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">start</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">start</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">l</span> <span class="o">=</span> <span class="n">start</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">validEnd</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>

        <span class="k">while</span> <span class="p">(</span><span class="n">l</span> <span class="o">&lt;=</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">int</span> <span class="n">m</span> <span class="o">=</span> <span class="n">l</span> <span class="o">+</span> <span class="p">(</span><span class="n">r</span> <span class="o">-</span> <span class="n">l</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>

            <span class="n">ll</span> <span class="n">score</span> <span class="o">=</span> <span class="cm">/* operation */</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">score</span> <span class="o">&lt;</span> <span class="n">k</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">validEnd</span> <span class="o">=</span> <span class="n">m</span><span class="p">;</span>
                <span class="n">l</span> <span class="o">=</span> <span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">r</span> <span class="o">=</span> <span class="n">m</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">validEnd</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">totalCount</span> <span class="o">+=</span> <span class="p">(</span><span class="n">validEnd</span> <span class="o">-</span> <span class="n">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">totalCount</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><a href="https://leetcode.com/problems/kth-smallest-element-in-a-sorted-matrix/">Kth Smallest Element in a Sorted Matrix</a></li>
  <li><a href="https://leetcode.com/problems/kth-smallest-element-in-a-bst/">Kth Smallest Element in a BST</a></li>
  <li><a href="https://leetcode.com/problems/kth-missing-positive-number/">Kth Missing Positive Number</a></li>
  <li><a href="https://leetcode.com/problems/find-first-and-last-position-of-element-in-sorted-array/">Find First and Last Position of Element in Sorted Array</a></li>
  <li><a href="https://leetcode.com/problems/search-insert-position/">Search Insert Position</a></li>
  <li><a href="https://leetcode.com/problems/find-minimum-in-rotated-sorted-array/">Find Minimum in Rotated Sorted Array</a></li>
  <li><a href="https://leetcode.com/problems/find-peak-element/">Find Peak Element</a></li>
  <li><a href="https://leetcode.com/problems/koko-eating-bananas/">Koko Eating Bananas</a></li>
  <li><a href="https://leetcode.com/problems/first-bad-version/">First Bad Version</a></li>
  <li><a href="https://leetcode.com/problems/median-of-two-sorted-arrays/">Median of Two Sorted Arrays</a></li>
</ul>

<h3 id="segment-tree--k-th-element-binary-search">Segment Tree + K-th Element Binary Search</h3>

<p>Use <strong>Segment Tree</strong> + Binary Search to guess the optimal segment.</p>

<blockquote>
  <p>Prefix Arrays: XOR, Sum (refer previous template)
Segment Tree is useful for operations like max/min, OR/AND, GCD/LCM, frequency count, etc., which can’t be efficiently done with prefix arrays.</p>
</blockquote>

<p>Below code implements LeetCode <code class="language-plaintext highlighter-rouge">3171. Find Subarray With Bitwise OR Closest to K</code>.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">namespace</span> <span class="n">rangeQuery</span> <span class="p">{</span>
  <span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">S</span><span class="p">,</span> <span class="k">auto</span> <span class="n">op</span><span class="p">,</span> <span class="k">auto</span> <span class="n">e</span><span class="p">&gt;</span>
  <span class="k">struct</span> <span class="nc">init</span> <span class="p">{</span>
<span class="nl">public:</span>
  <span class="n">init</span><span class="p">()</span> <span class="o">:</span> <span class="n">init</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="p">{}</span>
  <span class="k">explicit</span> <span class="nf">init</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="n">S</span> <span class="n">init_val</span> <span class="o">=</span> <span class="n">e</span><span class="p">())</span> <span class="o">:</span> <span class="n">init</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">S</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">init_val</span><span class="p">))</span> <span class="p">{}</span>
  <span class="k">explicit</span> <span class="nf">init</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">S</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">v</span><span class="p">)</span> <span class="o">:</span> <span class="n">_n</span><span class="p">(</span><span class="kt">int</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">size</span><span class="p">()))</span> <span class="p">{</span>
    <span class="n">size</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="mi">32</span> <span class="o">-</span> <span class="n">__builtin_clz</span><span class="p">(</span><span class="n">_n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">));</span>
    <span class="n">log</span> <span class="o">=</span> <span class="n">__builtin_ctz</span><span class="p">(</span><span class="n">size</span><span class="p">);</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">S</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">size</span><span class="p">,</span> <span class="n">e</span><span class="p">());</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">_n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span> <span class="n">d</span><span class="p">[</span><span class="n">size</span> <span class="o">+</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">];</span> <span class="p">}</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">size</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span> <span class="n">set</span><span class="p">(</span><span class="n">i</span><span class="p">);</span> <span class="p">}</span>
  <span class="p">}</span>
  <span class="kt">void</span> <span class="nf">update</span><span class="p">(</span><span class="kt">int</span> <span class="n">p</span><span class="p">,</span> <span class="n">S</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">d</span><span class="p">[</span><span class="n">p</span> <span class="o">+=</span> <span class="n">size</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">log</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="n">set</span><span class="p">(</span><span class="n">p</span> <span class="o">&gt;&gt;</span> <span class="n">i</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="n">S</span> <span class="n">get</span><span class="p">(</span><span class="kt">int</span> <span class="n">p</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">d</span><span class="p">[</span><span class="n">p</span> <span class="o">+</span> <span class="n">size</span><span class="p">];</span>
  <span class="p">}</span>
  <span class="n">S</span> <span class="n">get_all</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span> <span class="p">}</span>
  <span class="n">S</span> <span class="nf">query</span><span class="p">(</span><span class="kt">int</span> <span class="n">l</span><span class="p">,</span> <span class="kt">int</span> <span class="n">r</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
    <span class="n">S</span> <span class="n">sml</span> <span class="o">=</span> <span class="n">e</span><span class="p">(),</span> <span class="n">smr</span> <span class="o">=</span> <span class="n">e</span><span class="p">();</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">l</span> <span class="o">+=</span> <span class="n">size</span><span class="p">,</span> <span class="n">r</span> <span class="o">+=</span> <span class="n">size</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="n">l</span> <span class="o">&lt;</span> <span class="n">r</span><span class="p">;</span> <span class="n">l</span> <span class="o">&gt;&gt;=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">r</span> <span class="o">&gt;&gt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">l</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span> <span class="n">sml</span> <span class="o">=</span> <span class="n">op</span><span class="p">(</span><span class="n">sml</span><span class="p">,</span> <span class="n">d</span><span class="p">[</span><span class="n">l</span><span class="o">++</span><span class="p">]);</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">r</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span> <span class="n">smr</span> <span class="o">=</span> <span class="n">op</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="o">--</span><span class="n">r</span><span class="p">],</span> <span class="n">smr</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nf">op</span><span class="p">(</span><span class="n">sml</span><span class="p">,</span> <span class="n">smr</span><span class="p">);</span>
  <span class="p">}</span>
<span class="k">private</span><span class="o">:</span>
    <span class="kt">int</span> <span class="n">_n</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">log</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">S</span><span class="o">&gt;</span> <span class="n">d</span><span class="p">;</span>
    <span class="kt">void</span> <span class="nf">set</span><span class="p">(</span><span class="kt">int</span> <span class="n">k</span><span class="p">)</span> <span class="p">{</span> <span class="n">d</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">op</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="n">k</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">],</span> <span class="n">d</span><span class="p">[</span><span class="n">k</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span> <span class="o">|</span> <span class="mi">1</span><span class="p">]);</span> <span class="p">}</span>
  <span class="p">};</span>
<span class="p">}</span>
<span class="k">struct</span> <span class="nc">info</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">v</span><span class="p">;</span>
  <span class="n">info</span><span class="p">()</span> <span class="o">:</span> <span class="n">v</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="p">{}</span>
  <span class="n">info</span><span class="p">(</span><span class="kt">int</span> <span class="n">_v</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">_v</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="n">info</span> <span class="nf">e</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">info</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="p">}</span>
<span class="n">info</span> <span class="nf">op</span><span class="p">(</span><span class="k">const</span> <span class="n">info</span> <span class="o">&amp;</span><span class="n">l</span><span class="p">,</span> <span class="k">const</span> <span class="n">info</span> <span class="o">&amp;</span><span class="n">r</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span><span class="n">l</span><span class="p">.</span><span class="n">v</span> <span class="o">+</span> <span class="n">r</span><span class="p">.</span><span class="n">v</span><span class="p">};</span>
<span class="p">}</span>
<span class="k">using</span> <span class="n">segtree</span> <span class="o">=</span> <span class="n">rangeQuery</span><span class="o">::</span><span class="n">init</span><span class="o">&lt;</span><span class="n">info</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">e</span><span class="o">&gt;</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Solution</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">int</span> <span class="n">minimumDifference</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">k</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">info</span><span class="o">&gt;</span> <span class="n">t</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="n">t</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">info</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
        <span class="n">segtree</span> <span class="n">seg</span><span class="p">(</span><span class="n">t</span><span class="p">);</span>

        <span class="kt">int</span> <span class="n">res</span> <span class="o">=</span> <span class="n">INT_MAX</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">start</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">start</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">int</span> <span class="n">lo</span> <span class="o">=</span> <span class="n">start</span><span class="p">,</span> <span class="n">hi</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>

            <span class="k">while</span> <span class="p">(</span><span class="n">lo</span> <span class="o">&lt;=</span> <span class="n">hi</span><span class="p">)</span> <span class="p">{</span>
                <span class="kt">int</span> <span class="n">mid</span> <span class="o">=</span> <span class="p">(</span><span class="n">lo</span> <span class="o">+</span> <span class="n">hi</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">;</span>

                <span class="kt">int</span> <span class="n">val</span> <span class="o">=</span> <span class="n">seg</span><span class="p">.</span><span class="n">query</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">mid</span><span class="p">).</span><span class="n">v</span><span class="p">;</span>
                <span class="n">res</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">abs</span><span class="p">(</span><span class="n">k</span> <span class="o">-</span> <span class="n">val</span><span class="p">));</span>

                <span class="k">if</span> <span class="p">(</span><span class="n">val</span> <span class="o">==</span> <span class="n">k</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">val</span> <span class="o">&gt;</span> <span class="n">k</span><span class="p">)</span> <span class="n">hi</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
                <span class="k">else</span> <span class="n">lo</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">res</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>
<blockquote>
  <p style="color:gree; font-size:2em"> I strongly encaourage to enroll this in codeforce and try to solve </p>
  <p>As of now should be able to solve the problems(not necesserly to get AC, I strongly encourage to recognise pattern or get approach  on how to solve) from <a href="https://codeforces.com/edu/course/2">Codeforces — ITMO Academy: Pilot Course</a> <em>(Enroll in this course otherwise cannot access)</em></p>
</blockquote>

<h3 id="parallel-binary-search">Parallel Binary Search</h3>

<h3 id="binary-seach-on-rotated-array">Binary seach on rotated array</h3>

<p>simple yet tricky and also its kind of special binary search variant i admire. Questions such as
get peak/low value of unique/duplicate array can be asked. If you know that than any other variations can easily be solved if given roatated array of sorted array</p>

<h3 id="template-competetive-programming">Template Competetive Programming</h3>

<ul id="cf" class="tab" data-tab="b33dbc52-3183-4a47-b935-95537d6784ac" data-name="cf">
  
      <li class="active" id="cf-cp-template">
          <a href="#">CP Template </a>
      </li>
  
      <li id="cf-mostly-branchless-bsearch-template">
          <a href="#">Mostly Branchless BSearch Template </a>
      </li>
  
</ul>
<ul class="tab-content" id="b33dbc52-3183-4a47-b935-95537d6784ac" data-name="cf">
  
      <li class="active">
<p><code class="language-plaintext highlighter-rouge">firstTSeq</code> set to <code class="language-plaintext highlighter-rouge">true</code> when the given solution space in the monotonic sequence of the form <code class="language-plaintext highlighter-rouge">[T,T,F,F]</code>
<code class="language-plaintext highlighter-rouge">Lbound</code> lower_bound</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="nc">T</span><span class="p">,</span> <span class="k">typename</span> <span class="nc">U</span><span class="p">&gt;</span>
<span class="n">T</span> <span class="nf">bsearch</span><span class="p">(</span><span class="n">T</span> <span class="n">l</span><span class="p">,</span> <span class="n">T</span> <span class="n">r</span><span class="p">,</span> <span class="n">U</span> <span class="n">condition</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">Lbound</span> <span class="o">=</span> <span class="nb">true</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">firstTSeq</span> <span class="o">=</span> <span class="nb">false</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">while</span> <span class="p">(</span><span class="n">l</span> <span class="o">&lt;</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">T</span> <span class="n">mid</span> <span class="o">=</span> <span class="n">l</span> <span class="o">+</span> <span class="p">(</span><span class="n">r</span> <span class="o">-</span> <span class="n">l</span> <span class="o">+</span> <span class="n">firstTSeq</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">condition</span><span class="p">(</span><span class="n">mid</span><span class="p">))</span> <span class="n">firstTSeq</span> <span class="o">?</span> <span class="n">l</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">:</span> <span class="n">r</span> <span class="o">=</span> <span class="n">mid</span><span class="p">;</span>
    <span class="k">else</span> <span class="n">firstTSeq</span> <span class="o">?</span> <span class="n">r</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">:</span> <span class="n">l</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="p">(</span><span class="n">Lbound</span> <span class="o">?</span> <span class="n">l</span> <span class="o">:</span> <span class="n">l</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

</li>
  
      <li>
<p>Not recommended but can be used to slighly improvement run time milli seconds.</p>

</li>
  
</ul>

<h3 id="special-problems">Special Problems</h3>

<ul>
  <li><a href="https://leetcode.com/problems/median-of-two-sorted-arrays/">Median of Two Sorted Arrays</a></li>
  <li><a href="https://leetcode.com/problems/search-in-rotated-sorted-array">Search in Rotated Sorted Array</a></li>
  <li><a href="https://leetcode.com/problems/search-a-2d-matrix">Search in 2D matrix</a></li>
</ul>


        <hr style="visibility: hidden;">
        <ul class="pager">
          
          <li class="previous">
            <a href="/2025/07/25/aho-corasick/" data-toggle="tooltip"
              data-placement="top" title="Aho-Corasick Automation">
              Previous<br>
              <span>Aho-Corasick Automation</span>
            </a>
          </li>
          
          
          <li class="next">
            <a href="/2025/07/25/bit-manipulation/" data-toggle="tooltip"
              data-placement="top" title="Bit Manipulation">
              Next<br>
              <span>Bit Manipulation</span>
            </a>
          </li>
          
        </ul>
        <hr style="visibility: hidden;">

        

        
      </div>

      <!-- Side Catalog Container -->
      
      <div class="
                col-lg-2 col-lg-offset-0
                visible-lg-block
                sidebar-container
                catalog-container">
        <div class="side-catalog">
          <hr class="hidden-sm hidden-xs">
          <h5>
            <a class="catalog-toggle" href="#">CATALOG</a>
          </h5>
          <ul class="catalog-body"></ul>
        </div>
      </div>
      

      <!-- Sidebar Container -->
      <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

        <!-- Featured Tags -->
        


<section>
    
        <hr class="hidden-sm hidden-xs">
    
    <h5><a href="/archive/">FEATURED TAGS</a></h5>
    <div class="tags">
        
        
        
        
        
        
                <a data-sort="0017" 
                    href="/archive/?tag=C%2B%2B"
                    title="C++"
                    rel="7">C++</a>
        
                <a data-sort="0006" 
                    href="/archive/?tag=Algorithms"
                    title="Algorithms"
                    rel="18">Algorithms</a>
    </div>
</section>


        <!-- Friends Blog -->
        
      </div>
    </div>
  </div>
</article>


<script src="/js/jekyll-tabs.js"></script>
<!-- add support for mathjax by voleking-->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    SVG: {
      scale: 90
    },
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    }
  });
</script>

<script src="https://cdn.jsdelivr.net/gh/mathjax/MathJax@legacy-v2-develop/unpacked/MathJax.js?config=TeX-AMS_CHTML"></script>
<!-- <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script> -->









<!-- async load function -->
<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
  async("//cdnjs.cloudflare.com/ajax/libs/anchor-js/1.1.1/anchor.min.js", function () {
    anchors.options = {
      visible: 'hover',
      placement: 'right',
      // icon: '#'
    };
    anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
  })
</script>
<style>
  /* place left on bigger screen */
  @media all and (min-width: 800px) {
    .anchorjs-link {
      position: absolute;
      left: -0.75em;
      font-size: 1.1em;
      margin-top: -0.1em;
    }
  }
</style>


    <!-- Footer -->
<footer style="background-color: black; width: 100%; margin-top: 20px;">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <!-- SNS Link -->
                


<ul class="list-inline text-center">


  
  
  
  
  
  
  <li>
    <a target="_blank" href="https://github.com/shreyassn">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-github fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
  <li>
    <a target="_blank" href="https://www.linkedin.com/in/shreyassn">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
</ul>

                <p class="copyright text-muted">
                    Copyright &copy; Shreyas' Blogs 2025
                    <br>
                    <!-- Powered by <a href="http://huangxuan.me">Hux Blog</a> |
                    <iframe style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0" width="100px"
                        height="20px"
                        src="https://ghbtns.com/github-btn.html?user=huxpro&repo=huxpro.github.io&type=star&count=true">
                    </iframe> -->
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<!-- Currently, only navbar scroll-down effect at desktop still depends on this -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js "></script>

<!-- Simple Jekyll Search -->
<script src="/js/simple-jekyll-search.min.js"></script>

<!-- Service Worker -->

<script src="/js/snackbar.js"></script>
<script src="/js/sw-registration.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
        var d = document, t = 'script',
            o = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        o.src = u;
        if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
        s.parentNode.insertBefore(o, s);
    }
</script>

<!--
     Because of the native support for backtick-style fenced code blocks
     right within the Markdown is landed in Github Pages,
     From V1.6, There is no need for Highlight.js,
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/
     - https://github.com/jneen/rouge/wiki/list-of-supported-languages-and-lexers
-->

    <!-- <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script> -->
    <script>
        async("https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script> -->
    <!-- Highlight.js theme link - href will be switched by theme-toggle.js -->
    <link id="hljs-theme" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.css" rel="stylesheet">
   








<!--fastClick.js -->
<script>
    async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function () {
        var $nav = document.querySelector("nav");
        if ($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->



<!-- Baidu Tongji -->



<!-- Side Catalog -->

<script type="text/javascript">
    function generateCatalog(selector) {

        // interop with multilangual 
        if ('' == 'true') {
            _containerSelector = 'div.post-container.active'
        } else {
            _containerSelector = 'div.post-container'
        }

        // init
        var P = $(_containerSelector), a, n, t, l, i, c;
        a = P.find('h1,h2,h3,h4,h5,h6');

        // clean
        $(selector).html('')

        // appending
        a.each(function () {
            n = $(this).prop('tagName').toLowerCase();
            i = "#" + $(this).prop('id');
            t = $(this).text();
            c = $('<a href="' + i + '" rel="nofollow">' + t + '</a>');
            l = $('<li class="' + n + '_nav"></li>').append(c);
            $(selector).append(l);
        });
        return true;
    }

    generateCatalog(".catalog-body");

    // toggle side catalog
    $(".catalog-toggle").click((function (e) {
        e.preventDefault();
        $('.side-catalog').toggleClass("fold")
    }))

    /*
     * Doc: https://github.com/davist11/jQuery-One-Page-Nav
     * Fork by Hux to support padding
     */
    async("/js/jquery.nav.js", function () {
        $('.catalog-body').onePageNav({
            currentClass: "active",
            changeHash: !1,
            easing: "swing",
            filter: "",
            scrollSpeed: 700,
            scrollOffset: 0,
            scrollThreshold: .2,
            begin: null,
            end: null,
            scrollChange: null,
            padding: 80
        });
    });
</script>



<!-- Multi-Lingual -->


<!-- Simple Jekyll Search -->
<script>
    // https://stackoverflow.com/questions/1912501/unescape-html-entities-in-javascript
    function htmlDecode(input) {
        var e = document.createElement('textarea');
        e.innerHTML = input;
        // handle case of empty input
        return e.childNodes.length === 0 ? "" : e.childNodes[0].nodeValue;
    }

    SimpleJekyllSearch({
        searchInput: document.getElementById('search-input'),
        resultsContainer: document.getElementById('search-results'),
        json: '/search.json',
        searchResultTemplate: '<div class="post-preview item"><a href="{url}"><h2 class="post-title">{title}</h2><h3 class="post-subtitle">{subtitle}</h3><hr></a></div>',
        noResultsText: 'No results',
        limit: 50,
        fuzzy: false,
        // a hack to get escaped subtitle unescaped. for some reason, 
        // post.subtitle w/o escape filter nuke entire search.
        templateMiddleware: function (prop, value, template) {
            if (prop === 'subtitle' || prop === 'title') {
                if (value.indexOf("code")) {
                    return htmlDecode(value);
                } else {
                    return value;
                }
            }
        }
    });

    $(document).ready(function () {
        var $searchPage = $('.search-page');
        var $searchOpen = $('.search-icon');
        var $searchClose = $('.search-icon-close');
        var $searchInput = $('#search-input');
        var $body = $('body');

        $searchOpen.on('click', function (e) {
            e.preventDefault();
            $searchPage.toggleClass('search-active');
            var prevClasses = $body.attr('class') || '';
            setTimeout(function () {
                $body.addClass('no-scroll');
            }, 400)

            if ($searchPage.hasClass('search-active')) {
                $searchClose.on('click', function (e) {
                    e.preventDefault();
                    $searchPage.removeClass('search-active');
                    $body.attr('class', prevClasses);  // from closure 
                });
                $searchInput.focus();
            }
        });
    });
</script>

<!-- Theme toggle script (handles dark/light and persists choice) -->
<script src="/js/theme-toggle.js"></script>


<!-- Image to hack wechat -->
<!-- <img src="/img/icon_wechat.png" width="0" height="0" /> -->
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
